\chapter{CFG}\label{app:CFG}
\begin{lstlisting}[caption={\acrshort{cfg} and Lexing rules},frame=tlrb,numbers=none]
//PARSER

topLevel
    : importing* functiondeclaration* statement* EOF
    ;

statement
    : assignment ';'
    | declaration ';'
    | functioncall ';'
    | controlblock
    | loop
    ;

importing
    : IMPORT '<' LIBRARY '>'
    ; 

controlblock
    : IF '(' conditionalExpression ')' block (ELSE IF '(' conditionalExpression ')' block)* (ELSE block)?
    ;

loop
    : WHILE '(' conditionalExpression ')' block
    | FOR '(' (declaration | assignment) ';' conditionalExpression ';' expression ')' block
    ;

block
    : '{' statement* '}'
    ;
                                                                       
conditionalExpression                                                  
    : conditionalExpression '&&' conditionalExpression                 
    | conditionalExpression '||' conditionalExpression                 
    | expression conditionalOperator expression                        
    | conditionalExpression  ( '==' | '!=' ) conditionalExpression     
    | '(' conditionalExpression ')'                                    
    | BOOLVAL                                                          
    ;                                                                  
                                                                       
functiondeclaration
    : functiondatatype ID '(' parameterlist ')' functionbody
    ; 
    
functionbody
    : '{' ( statement )* functionreturn? '}'
    ;

functionreturn
    : 'return' expression ';'
    ;

parameterlist
    : (parameter( ',' parameter )*)?
    | 
    ;

parameter
    : (valueType | complexdatatype ) ID
    ;                                      
                                           
functioncall                               
    : ID '(' argumentlist ')'              
    | PRINT '(' argumentlist ')'           
    | COMPLEXTOFILE '(' argumentlist ')'   
    | FILETOCOMPLEX  '(' argumentlist ')'  
    ;                                      

argumentlist
    : (expression | STRING) ( ',' (expression | STRING) ) *
    | 
    ;

expression                                            
    : expression '^' expression                       
    | expression ( '*' | '/' | '%' | '#' ) expression 
    | expression ( '+' | '-' ) expression             
    | '(' expression ')'                              
    | value                                           
    | ID postUnaryOperator                            
    ;                                                 
                                                      
assignment
    : valassignment
	| collectionassignment
    ;

valassignment                                       
	: ID assignmentOperator ( expression | BOOLVAL )
    | ID postUnaryOperator                          
	;                                               
                                                       
collectionassignment                                   
	: ID '=' expression                                
	| collectionEntrance assignmentOperator expression 
	;                                                  
	
declaration                                           
    : valueType ID '=' expression                     
    | complexdatatype ID '=' expression               
    | complexdatatype '[' entranceCoordinate ']' ID   
    ;                                                 
    
valueType                          
    : INT                          
    | FLOAT                        
    | BOOL                         
    ;                              
                                   
complexdatatype
    : collectiontype '<' valueType '>'
    ;

functiondatatype
    : valueType
    | complexdatatype
    | VOID
    ;

value                                      
    : ID                                   
    | constant                             
    | '[' valueList ( ';' valueList )* ']' 
    | functioncall                         
    | collectionEntrance                   
    | BOOLVAL                              
    ;                                      
                                           
collectionEntrance
    : ID '[' entranceCoordinate ']'
    ;

valueList
    : value ( ',' value)*
    ;

constantList
    : constant ( ',' constant )*
    ;

entranceCoordinate
    : value ( ',' value )?
    ;

collectiontype
    : MATRIX    #collectionMatrix
    | VECTOR    #collectionVector
    ;

postUnaryOperator 
    : '++' | '--' | '^T' ;

assignmentOperator
    : '=' | '+=' | '-=' | '*=' | '/=' ;

conditionalOperator
    : '==' | '!=' | '<=' | '>=' | '<' | '>' ;

constant
    : INTNUM  
    | FLOATNUM 
    ;

//LEXER  

IMPORT: 'include' | 'import' ;  
  
IF: 'if' ;
ELSE: 'else' ;

WHILE: 'while' ;
FOR: 'for' ;   
PFOR: 'pfor' ;

MATRIX: 'matrix' ;
VECTOR: 'vector' ;

INT: 'int' | 'int16' | 'int32' | 'int64' ;
INTNUM: '0' | SIGN? [1-9][0-9]* ;

FLOAT: 'float' | 'float16' | 'float32' | 'float64' ;  
FLOATNUM: SIGN? ([1-9][0-9]* | '0') '.' ([0-9]* [1-9] | '0') ;

BOOL: 'bool' ;
BOOLVAL: 'true' | 'false' ;

VOID: 'void' ;

STRING: '"' .*? '"' ;

SIGN: '-' ;   

PRINT: 'print' ;
COMPLEXTOFILE: 'matrixToFile' ;
FILETOCOMPLEX: 'fileToMatrix' ;

ID: [a-zA-Z_][a-zA-Z0-9_]* ;    

LIBRARY: [a-zA-Z0-9_\/'.']+;

//Whitespace and comments

WS: [ \t ]+ -> skip;

NL: [ \r \n | \n ] -> skip;

COMMENT
    :   '/*' .*? '*/' -> skip
    ;

LINE_COMMENT
    :   '//' ~[\r\n]* -> skip
    ;
                                                
\end{lstlisting}